# ğŸ” æ­£åˆ™è¡¨è¾¾å¼è‡ªåŠ¨æœºè½¬æ¢å™¨ (Lab 2)

> **Regex â†’ NFA â†’ DFA â†’ æœ€å° DFA**  
> åŸºäº Thompson æ„é€ ã€å­é›†æ„é€ ã€è¡¨å¡«å……ç®—æ³•çš„å®Œæ•´å®ç°

[![Python](https://img.shields.io/badge/Python-3.11+-blue.svg)](https://www.python.org/)
[![Streamlit](https://img.shields.io/badge/Streamlit-1.40+-red.svg)](https://streamlit.io/)
[![uv](https://img.shields.io/badge/uv-Package%20Manager-purple.svg)](https://github.com/astral-sh/uv)

---

## ğŸ“– ç›®å½•

- [é¡¹ç›®æ¦‚è¿°](#-é¡¹ç›®æ¦‚è¿°)
- [åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§)
- [ç®—æ³•åŸç†](#-ç®—æ³•åŸç†)
- [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [é¡¹ç›®ç»“æ„](#-é¡¹ç›®ç»“æ„)
- [ä½¿ç”¨æ–¹æ³•](#-ä½¿ç”¨æ–¹æ³•)
- [æ”¯æŒçš„æ­£åˆ™è¯­æ³•](#-æ”¯æŒçš„æ­£åˆ™è¯­æ³•)
- [å¯¼å‡ºåŠŸèƒ½](#-å¯¼å‡ºåŠŸèƒ½)
- [æŠ€æœ¯å®ç°](#-æŠ€æœ¯å®ç°)
- [å¼€å‘ä¿¡æ¯](#-å¼€å‘ä¿¡æ¯)

---

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯ç¼–è¯‘åŸç†è¯¾ç¨‹å®éªŒ 2 çš„å®Œæ•´å®ç°ï¼Œæ¶µç›–æ­£åˆ™è¡¨è¾¾å¼åˆ°æœ‰é™è‡ªåŠ¨æœºçš„è½¬æ¢å…¨æµç¨‹ï¼š

1. **Thompson æ„é€ ç®—æ³•**ï¼šå°†æ­£åˆ™è¡¨è¾¾å¼è½¬æ¢ä¸ºéç¡®å®šæœ‰é™è‡ªåŠ¨æœºï¼ˆNFAï¼‰
2. **å­é›†æ„é€ ç®—æ³•**ï¼šå°† NFA è½¬æ¢ä¸ºç¡®å®šæœ‰é™è‡ªåŠ¨æœºï¼ˆDFAï¼‰
3. **è¡¨å¡«å……ç®—æ³•**ï¼šå°† DFA æœ€å°åŒ–ä¸ºç­‰ä»·çš„æœ€å° DFA

é¡¹ç›®æä¾›ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š
- ğŸŒ **Streamlit Web ç•Œé¢**ï¼šäº¤äº’å¼å¯è§†åŒ–ï¼Œæ”¯æŒå®æ—¶é¢„è§ˆå’Œå¯¼å‡º
- ğŸ’» **å‘½ä»¤è¡Œ CLI**ï¼šæ”¯æŒæ‰¹å¤„ç†å’Œäº¤äº’èœå•æ¨¡å¼

### å®éªŒä»»åŠ¡è¦†ç›–

| ä»»åŠ¡ | æè¿° | çŠ¶æ€ |
|------|------|------|
| æ­£åˆ™è§£æ | ä¸­ç¼€è¡¨è¾¾å¼è½¬åç¼€ï¼Œå¤„ç†è¿æ¥ç¬¦ | âœ… å·²å®Œæˆ |
| NFA æ„é€  | Thompson æ„é€ ç®—æ³•å®ç° | âœ… å·²å®Œæˆ |
| DFA è½¬æ¢ | å­é›†æ„é€ ç®—æ³•ï¼ˆÎµ-é—­åŒ…ï¼‰| âœ… å·²å®Œæˆ |
| DFA æœ€å°åŒ– | è¡¨å¡«å……ç®—æ³•ï¼ˆç­‰ä»·ç±»åˆ’åˆ†ï¼‰| âœ… å·²å®Œæˆ |
| å­—ç¬¦ä¸²åŒ¹é… | NFA/DFA æ¨¡æ‹Ÿè¯†åˆ« | âœ… å·²å®Œæˆ |
| å¯è§†åŒ– | Graphviz DOT/PNG å¯¼å‡º | âœ… å·²å®Œæˆ |
| Web ç•Œé¢ | Streamlit äº¤äº’å¼æ¼”ç¤º | âœ… å·²å®Œæˆ |

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ§® æ ¸å¿ƒç®—æ³•

- âœ… **æ­£åˆ™è¡¨è¾¾å¼è§£æ**
  - è‡ªåŠ¨æ’å…¥éšå¼è¿æ¥ç¬¦
  - ä¸­ç¼€è½¬åç¼€ï¼ˆè°ƒåº¦åœºç®—æ³•ï¼‰
  - è¿ç®—ç¬¦ä¼˜å…ˆçº§ï¼š`*` > `.`ï¼ˆè¿æ¥ï¼‰> `|`

- âœ… **Thompson æ„é€ **
  - æ”¯æŒåŸºæœ¬å­—ç¬¦ã€è¿æ¥ã€é€‰æ‹©ã€é—­åŒ…
  - ç”Ÿæˆå¸¦ Îµ è½¬ç§»çš„ NFA

- âœ… **å­é›†æ„é€ **
  - Îµ-é—­åŒ…è®¡ç®—
  - çŠ¶æ€é›†åˆåˆ° DFA çŠ¶æ€æ˜ å°„
  - è‡ªåŠ¨ç¡®å®šæ¥å—çŠ¶æ€

- âœ… **DFA æœ€å°åŒ–**
  - è¡¨å¡«å……ç®—æ³•ï¼ˆæ ‡è®°ç­‰ä»·/éç­‰ä»·çŠ¶æ€å¯¹ï¼‰
  - ç­‰ä»·ç±»åˆå¹¶ï¼ˆå¹¶æŸ¥é›†å®ç°ï¼‰
  - æ­»çŠ¶æ€æ¶ˆé™¤

### ğŸ” å­—ç¬¦ä¸²åŒ¹é…

- âœ… NFA æ¨¡æ‹Ÿï¼ˆBFS éå†æ‰€æœ‰å¯èƒ½è·¯å¾„ï¼‰
- âœ… DFA/æœ€å° DFA ç›´æ¥åŒ¹é…
- âœ… åŒ¹é…è·¯å¾„è¿½è¸ªä¸å¯è§†åŒ–
- âœ… æ‰¹é‡å­—ç¬¦ä¸²æ£€æµ‹

### ğŸ–¥ï¸ å¯è§†åŒ–ç•Œé¢

- âœ… Streamlit Web åº”ç”¨
- âœ… å®æ—¶æ­£åˆ™è¡¨è¾¾å¼è§£æ
- âœ… çŠ¶æ€è½¬ç§»è¡¨å±•ç¤ºï¼ˆNFA/DFA/MinDFAï¼‰
- âœ… Graphviz å›¾å½¢æ¸²æŸ“
- âœ… DOT/PNG/HTML ä¸€é”®å¯¼å‡º

### ğŸ“¤ å¯¼å‡ºåŠŸèƒ½

- âœ… Graphviz DOT æ ¼å¼
- âœ… PNG å›¾åƒï¼ˆéœ€å®‰è£… Graphvizï¼‰
- âœ… ç¦»çº¿ HTMLï¼ˆå†…åµŒ Viz.jsï¼Œæ— éœ€æœåŠ¡å™¨ï¼‰

---

## ğŸ“š ç®—æ³•åŸç†

### è½¬æ¢æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        è‡ªåŠ¨æœºè½¬æ¢æµç¨‹                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚   â”‚   æ­£åˆ™è¡¨è¾¾å¼  â”‚     â”‚   åç¼€è¡¨è¾¾å¼  â”‚     â”‚     NFA     â”‚               â”‚
â”‚   â”‚  (a|b)*abb  â”‚â”€â”€â”€â”€â–¶â”‚  ab|*a.b.b. â”‚â”€â”€â”€â”€â–¶â”‚  Îµ-NFA      â”‚               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚          â”‚                   â”‚                   â”‚                       â”‚
â”‚          â”‚            è°ƒåº¦åœºç®—æ³•            Thompson æ„é€                  â”‚
â”‚          â”‚                                       â”‚                       â”‚
â”‚          â”‚                                       â–¼                       â”‚
â”‚          â”‚                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚          â”‚                               â”‚     DFA     â”‚                â”‚
â”‚          â”‚                               â”‚  ç¡®å®šè‡ªåŠ¨æœº   â”‚                â”‚
â”‚          â”‚                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚          â”‚                                       â”‚                       â”‚
â”‚          â”‚                                 å­é›†æ„é€                        â”‚
â”‚          â”‚                                       â”‚                       â”‚
â”‚          â”‚                                       â–¼                       â”‚
â”‚          â”‚                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚          â”‚                               â”‚   MinDFA    â”‚                â”‚
â”‚          â”‚                               â”‚  æœ€å°åŒ– DFA  â”‚                â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                  â”‚                       â”‚
â”‚                                            è¡¨å¡«å……ç®—æ³•                     â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Thompson æ„é€ è§„åˆ™

| æ­£åˆ™ | æ„é€ æ–¹å¼ |
|------|----------|
| `a` (å•å­—ç¬¦) | `â—‹ â”€â”€aâ”€â”€â–¶ â—` |
| `AB` (è¿æ¥) | `â—‹A â”€â”€Îµâ”€â”€â–¶ â—‹B` |
| `A\|B` (é€‰æ‹©) | æ–°èµ·ç‚¹ Îµ åˆ†å‰åˆ° Aã€Bï¼ŒAã€B ç»ˆç‚¹ Îµ åˆå¹¶åˆ°æ–°ç»ˆç‚¹ |
| `A*` (é—­åŒ…) | æ–°èµ·ç‚¹ Îµ åˆ° A å’Œæ–°ç»ˆç‚¹ï¼ŒA ç»ˆç‚¹ Îµ å› A èµ·ç‚¹å’Œæ–°ç»ˆç‚¹ |

### å­é›†æ„é€ æ ¸å¿ƒ

```python
def epsilon_closure(states):
    """è®¡ç®—çŠ¶æ€é›†åˆçš„ Îµ-é—­åŒ…"""
    closure = set(states)
    stack = list(states)
    while stack:
        s = stack.pop()
        for t in transitions[s].get(EPSILON, []):
            if t not in closure:
                closure.add(t)
                stack.append(t)
    return frozenset(closure)
```

### è¡¨å¡«å……ç®—æ³•

1. **åˆå§‹åŒ–**ï¼šæ¥å—çŠ¶æ€ä¸éæ¥å—çŠ¶æ€æ ‡è®°ä¸ºä¸ç­‰ä»·
2. **è¿­ä»£ä¼ æ’­**ï¼šå¦‚æœ (p,q) å¯¹æŸç¬¦å· a è½¬ç§»åˆ°å·²æ ‡è®°ä¸ç­‰ä»·çš„çŠ¶æ€å¯¹ï¼Œåˆ™æ ‡è®° (p,q)
3. **åˆå¹¶**ï¼šæœªæ ‡è®°çš„çŠ¶æ€å¯¹ç­‰ä»·ï¼Œç”¨å¹¶æŸ¥é›†åˆå¹¶

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Python** >= 3.11
- **uv** åŒ…ç®¡ç†å™¨ï¼ˆæ¨èï¼‰
- **Graphviz**ï¼ˆå¯é€‰ï¼Œç”¨äºç”Ÿæˆ PNGï¼‰

### å®‰è£…æ­¥éª¤

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd lab2-new

# ä½¿ç”¨ uv å®‰è£…ä¾èµ–
uv sync

# è¿è¡Œ Web ç•Œé¢ï¼ˆæ¨èï¼‰
uv run streamlit run app.py

# æˆ–è¿è¡Œ CLI
uv run python main.py
```

### Graphviz å®‰è£…ï¼ˆå¯é€‰ï¼‰

å¦‚éœ€ç”Ÿæˆ PNG å›¾åƒï¼Œè¯·å®‰è£… Graphvizï¼š

```bash
# Ubuntu/Debian
sudo apt install graphviz

# macOS
brew install graphviz

# Windows (ä½¿ç”¨ winget)
winget install graphviz
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
lab2-new/
â”œâ”€â”€ ğŸ“„ README.md                 # æœ¬æ–‡æ¡£
â”œâ”€â”€ ğŸ“„ pyproject.toml            # é¡¹ç›®é…ç½®ä¸ä¾èµ–
â”œâ”€â”€ ğŸ“„ uv.lock                   # ä¾èµ–é”å®šæ–‡ä»¶
â”œâ”€â”€ ğŸ“„ .python-version           # Python ç‰ˆæœ¬è¦æ±‚
â”œâ”€â”€ ğŸ“„ main.py                   # CLI å‘½ä»¤è¡Œå…¥å£
â”œâ”€â”€ ğŸ“„ app.py                    # Streamlit Web ç•Œé¢
â”‚
â””â”€â”€ ğŸ“ src/                      # æ ¸å¿ƒæºä»£ç 
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ automata.py             # æ ¸å¿ƒç®—æ³•ï¼ˆNFA/DFA/MinDFAï¼‰
    â”œâ”€â”€ exporting.py            # Graphviz å¯¼å‡º
    â””â”€â”€ html_export.py          # ç¦»çº¿ HTML ç”Ÿæˆ
```

### æ ¸å¿ƒæ¨¡å—è¯´æ˜

| æ¨¡å— | æ–‡ä»¶ | èŒè´£ |
|------|------|------|
| **è‡ªåŠ¨æœºç®—æ³•** | `src/automata.py` | Thompson æ„é€ ã€å­é›†æ„é€ ã€DFA æœ€å°åŒ–ã€åŒ¹é…è¯†åˆ« |
| **å›¾å½¢å¯¼å‡º** | `src/exporting.py` | ç”Ÿæˆ Graphviz DOT æ ¼å¼ï¼Œè°ƒç”¨ dot æ¸²æŸ“ PNG |
| **HTML ç”Ÿæˆ** | `src/html_export.py` | ç”Ÿæˆå†…åµŒ Viz.js çš„ç¦»çº¿å¯è§†åŒ–é¡µé¢ |
| **Web ç•Œé¢** | `app.py` | Streamlit äº¤äº’å¼å‰ç«¯ |
| **å‘½ä»¤è¡Œ** | `main.py` | CLI æ‰¹å¤„ç†ä¸äº¤äº’èœå• |

---

## ğŸ’» ä½¿ç”¨æ–¹æ³•

### Web ç•Œé¢æ¨¡å¼ï¼ˆæ¨èï¼‰

```bash
uv run streamlit run app.py
```

å¯åŠ¨åè®¿é—® `http://localhost:8501`ï¼ŒåŠŸèƒ½åŒ…æ‹¬ï¼š

1. ğŸ“ è¾“å…¥æ­£åˆ™è¡¨è¾¾å¼
2. ğŸ“Š æŸ¥çœ‹ NFA/DFA/MinDFA çŠ¶æ€å›¾
3. ğŸ“‹ æŸ¥çœ‹çŠ¶æ€è½¬ç§»è¡¨
4. ğŸ” å•ä¸²/æ‰¹é‡å­—ç¬¦ä¸²æ£€æµ‹
5. ğŸ“¥ å¯¼å‡º DOT/PNG/HTML

### å‘½ä»¤è¡Œæ¨¡å¼

#### äº¤äº’æ¨¡å¼

```bash
uv run python main.py
```

è¿›å…¥äº¤äº’èœå•ï¼š
```
è¯·è¾“å…¥æ­£è§„è¡¨è¾¾å¼ï¼ˆå›è½¦ä½¿ç”¨é»˜è®¤ (a|b)*abbï¼‰ï¼š(a|b)*abb

ã€æ“ä½œèœå•ã€‘
1. æ‰¹é‡æµ‹è¯•å­—ç¬¦ä¸²æ˜¯å¦è¢«æ¥å—
2. æŸ¥çœ‹ NFA/DFA è½¬ç§»è¡¨
3. æ˜¾ç¤ºåŒ¹é…è·¯å¾„ï¼ˆé€æ­¥æ¼”ç¤ºï¼‰
4. å¯¼å‡º Graphviz (.dot/.png)
5. ç”Ÿæˆç¦»çº¿å¯è§†åŒ– HTML
6. æ¢ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼
0. é€€å‡º
```

#### æ‰¹å¤„ç†æ¨¡å¼

```bash
# æŒ‡å®šæ­£åˆ™å’Œæµ‹è¯•å­—ç¬¦ä¸²
uv run python main.py --regex "(a|b)*abb" --strings abb aabb ab

# ç”Ÿæˆç¦»çº¿ HTML
uv run python main.py --regex "(a|b)*abb" --output-html result.html --no-interactive

# å¯¼å‡º DOT æ–‡ä»¶
uv run python main.py --regex "a*b*" --dump-dot --no-interactive
```

#### å‘½ä»¤è¡Œå‚æ•°

| å‚æ•° | è¯´æ˜ |
|------|------|
| `--regex` | æŒ‡å®šæ­£åˆ™è¡¨è¾¾å¼ï¼ˆé»˜è®¤ `(a|b)*abb`ï¼‰|
| `--strings` | å¾…æ£€æµ‹å­—ç¬¦ä¸²åˆ—è¡¨ï¼ˆç©ºæ ¼åˆ†éš”ï¼‰|
| `--output-html` | è¾“å‡ºç¦»çº¿ HTML æ–‡ä»¶è·¯å¾„ |
| `--no-png` | å¯¼å‡º DOT æ—¶ä¸å°è¯•ç”Ÿæˆ PNG |
| `--no-interactive` | ä»…æ‰§è¡Œæ‰¹å¤„ç†ï¼Œä¸è¿›å…¥äº¤äº’èœå• |
| `--dump-dot` | é¢å¤–è¾“å‡º DOT æ–‡ä»¶åˆ°å½“å‰ç›®å½• |

---

## ğŸ“ æ”¯æŒçš„æ­£åˆ™è¯­æ³•

### åŸºæœ¬è¯­æ³•

| è¯­æ³• | å«ä¹‰ | ç¤ºä¾‹ |
|------|------|------|
| `a` | åŒ¹é…å•ä¸ªå­—ç¬¦ a | `a` åŒ¹é… "a" |
| `AB` | è¿æ¥ï¼ˆéšå¼ï¼Œè‡ªåŠ¨æ’å…¥ï¼‰ | `ab` åŒ¹é… "ab" |
| `A\|B` | é€‰æ‹©ï¼ˆA æˆ– Bï¼‰ | `a\|b` åŒ¹é… "a" æˆ– "b" |
| `A*` | é—­åŒ…ï¼ˆ0 æ¬¡æˆ–å¤šæ¬¡ï¼‰ | `a*` åŒ¹é… "", "a", "aa", ... |
| `(A)` | åˆ†ç»„ | `(ab)*` åŒ¹é… "", "ab", "abab", ... |

### è¿ç®—ç¬¦ä¼˜å…ˆçº§

1. `*` (é—­åŒ…) - æœ€é«˜
2. `.` (è¿æ¥) - ä¸­ç­‰ï¼ˆéšå¼ï¼Œè‡ªåŠ¨æ’å…¥ï¼‰
3. `|` (é€‰æ‹©) - æœ€ä½

### ç¤ºä¾‹

| æ­£åˆ™è¡¨è¾¾å¼ | åŒ¹é…ç¤ºä¾‹ | ä¸åŒ¹é…ç¤ºä¾‹ |
|------------|----------|------------|
| `(a\|b)*abb` | "abb", "aabb", "babb", "aaabbb" | "ab", "aab", "bab" |
| `a*b*` | "", "a", "b", "aab", "abb", "aaabbb" | "ba", "aba" |
| `(ab)*` | "", "ab", "abab", "ababab" | "a", "b", "aab" |
| `a(b\|c)*d` | "ad", "abd", "acd", "abcd" | "a", "abdc" |

---

## ğŸ“¤ å¯¼å‡ºåŠŸèƒ½

### Graphviz DOT æ ¼å¼

DOT æ–‡ä»¶å¯ç”¨äº Graphviz æ¸²æŸ“æˆ–åœ¨çº¿å·¥å…·ï¼ˆå¦‚ [Graphviz Online](https://dreampuf.github.io/GraphvizOnline/)ï¼‰ã€‚

**å¯¼å‡ºç¤ºä¾‹**ï¼š
```dot
digraph NFA {
  rankdir=LR;
  node [shape=circle];
  __start [shape=point];
  __start -> 0;
  1 [shape=doublecircle];
  0 -> 1 [label="a"];
  0 -> 0 [label="Îµ"];
}
```

### PNG å›¾åƒ

éœ€è¦å®‰è£… Graphvizã€‚ç¨‹åºä¼šè‡ªåŠ¨æ£€æµ‹ `dot` å‘½ä»¤å¹¶è°ƒç”¨ï¼š

```bash
dot -Tpng automaton_nfa.dot -o automaton_nfa.png
```

### ç¦»çº¿ HTML

ç”Ÿæˆçš„ HTML æ–‡ä»¶å†…åµŒ Viz.jsï¼Œæ— éœ€æœåŠ¡å™¨å³å¯åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹ï¼š

- å¯ä¿®æ”¹æ­£åˆ™è¡¨è¾¾å¼å®æ—¶åˆ·æ–°
- æ”¯æŒå•ä¸²/æ‰¹é‡å­—ç¬¦ä¸²æ£€æµ‹
- å¯åˆ‡æ¢ NFA/DFA/MinDFA è§†å›¾
- å®Œå…¨ç¦»çº¿è¿è¡Œ

---

## ğŸ”¬ æŠ€æœ¯å®ç°

### NFA æ•°æ®ç»“æ„

```python
@dataclass
class NFA:
    start: int                                      # èµ·å§‹çŠ¶æ€
    accept: int                                     # æ¥å—çŠ¶æ€ï¼ˆå•ä¸ªï¼‰
    transitions: Dict[int, Dict[str, Set[int]]]    # è½¬ç§»å‡½æ•°
    # transitions[state][symbol] = {ç›®æ ‡çŠ¶æ€é›†åˆ}
    # EPSILON (None) è¡¨ç¤º Îµ è½¬ç§»
```

### DFA æ•°æ®ç»“æ„

```python
@dataclass
class DFA:
    start: int                              # èµ·å§‹çŠ¶æ€
    accepts: Set[int]                       # æ¥å—çŠ¶æ€é›†åˆ
    transitions: Dict[int, Dict[str, int]] # è½¬ç§»å‡½æ•°ï¼ˆç¡®å®šæ€§ï¼‰
    alphabet: Set[str]                      # å­—æ¯è¡¨
```

### æ ¸å¿ƒç®—æ³•å¤æ‚åº¦

| ç®—æ³• | æ—¶é—´å¤æ‚åº¦ | ç©ºé—´å¤æ‚åº¦ |
|------|------------|------------|
| æ­£åˆ™è§£æ | O(n) | O(n) |
| Thompson æ„é€  | O(n) | O(n) |
| å­é›†æ„é€  | O(2^n) (æœ€å) | O(2^n) |
| DFA æœ€å°åŒ– | O(nÂ²Â·|Î£|) | O(nÂ²) |
| å­—ç¬¦ä¸²åŒ¹é… | O(m) (DFA) | O(1) |

*n = NFA çŠ¶æ€æ•°ï¼Œm = å­—ç¬¦ä¸²é•¿åº¦ï¼Œ|Î£| = å­—æ¯è¡¨å¤§å°*

### Îµ-é—­åŒ…å®ç°

```python
def epsilon_closure(transitions, states):
    """è®¡ç®— Îµ-é—­åŒ…ï¼šä» states å‡ºå‘ï¼Œä»…é€šè¿‡ Îµ è½¬ç§»å¯è¾¾çš„æ‰€æœ‰çŠ¶æ€"""
    stack = list(states)
    closure = set(states)
    while stack:
        s = stack.pop()
        for tgt in transitions.get(s, {}).get(EPSILON, set()):
            if tgt not in closure:
                closure.add(tgt)
                stack.append(tgt)
    return frozenset(closure)
```

### è¡¨å¡«å……ç®—æ³•å®ç°

```python
def minimize_dfa(dfa):
    # 1. åˆå§‹åŒ–ï¼šæ¥å—ä¸éæ¥å—çŠ¶æ€æ ‡è®°ä¸ºä¸ç­‰ä»·
    for i in range(n):
        for j in range(i):
            if (states[i] in accepts) != (states[j] in accepts):
                table[i][j] = True  # æ ‡è®°ä¸ºä¸ç­‰ä»·
    
    # 2. è¿­ä»£ä¼ æ’­
    changed = True
    while changed:
        changed = False
        for i in range(n):
            for j in range(i):
                if not table[i][j]:
                    for a in alphabet:
                        p, q = trans[i][a], trans[j][a]
                        if table[max(p,q)][min(p,q)]:
                            table[i][j] = True
                            changed = True
                            break
    
    # 3. åˆå¹¶ç­‰ä»·çŠ¶æ€ï¼ˆå¹¶æŸ¥é›†ï¼‰
    for i in range(n):
        for j in range(i):
            if not table[i][j]:
                union(states[i], states[j])
```

---

## ğŸ“Š æ€§èƒ½ä¸ç»Ÿè®¡

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| æºä»£ç è¡Œæ•° | ~1200 è¡Œ |
| æ”¯æŒçš„è¿ç®—ç¬¦ | 4 ç§ï¼ˆ`*`, `.`, `|`, `()`) |
| å¯¼å‡ºæ ¼å¼ | 3 ç§ï¼ˆDOT, PNG, HTMLï¼‰ |
| ç•Œé¢æ¨¡å¼ | 2 ç§ï¼ˆWeb, CLIï¼‰ |

---

## ğŸ†š ä¸ lab2 çš„åŒºåˆ«

æœ¬é¡¹ç›®ï¼ˆlab2-newï¼‰æ˜¯å¯¹åŸ lab2 çš„é‡æ„ç‰ˆæœ¬ï¼š

| ç‰¹æ€§ | lab2 (åŸç‰ˆ) | lab2-new (æ–°ç‰ˆ) |
|------|-------------|-----------------|
| é¡¹ç›®ç®¡ç† | pip | **uv** |
| ç•Œé¢ | CLI only | **Streamlit + CLI** |
| ä»£ç ç»“æ„ | å•æ–‡ä»¶ | **æ¨¡å—åŒ– (src/)** |
| å¯è§†åŒ– | é™æ€ç”Ÿæˆ | **å®æ—¶äº¤äº’** |
| ä¾èµ– | æ‰‹åŠ¨ç®¡ç† | **pyproject.toml** |
| HTML å¯¼å‡º | åŸºç¡€ | **å†…åµŒ Viz.js** |

---

## ğŸ‘¥ å¼€å‘ä¿¡æ¯

### å®éªŒè¯¾ç¨‹

- **è¯¾ç¨‹åç§°**ï¼šç¼–è¯‘åŸç†
- **å®éªŒç¼–å·**ï¼šLab 2
- **å®éªŒå†…å®¹**ï¼šæ­£åˆ™è¡¨è¾¾å¼ä¸æœ‰é™è‡ªåŠ¨æœº

### å‚è€ƒèµ„æ–™

- ã€Šç¼–è¯‘åŸç†ã€‹é¾™ä¹¦ ç¬¬ 3 ç« ï¼šè¯æ³•åˆ†æ
- [Thompson's Construction](https://en.wikipedia.org/wiki/Thompson%27s_construction)
- [Powerset Construction](https://en.wikipedia.org/wiki/Powerset_construction)
- [DFA Minimization](https://en.wikipedia.org/wiki/DFA_minimization)

### æŠ€æœ¯æ ˆ

- **è¯­è¨€**ï¼šPython 3.11+
- **åŒ…ç®¡ç†**ï¼šuv
- **Web æ¡†æ¶**ï¼šStreamlit 1.40+
- **å¯è§†åŒ–**ï¼šGraphviz / Viz.js

---

## ğŸ“œ è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œæ•™å­¦ä½¿ç”¨ã€‚

---

<p align="center">
  <i>ğŸ“ ç¼–è¯‘åŸç†è¯¾ç¨‹å®éªŒé¡¹ç›® | Regex â†’ NFA â†’ DFA â†’ MinDFA</i>
</p>
